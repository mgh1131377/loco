const AutoTranslator=function(t,e,a){let s=t.locoConf,n=t.extradata,o=!1,{ajax_url:r,nonce:i,ATLT_URL:l,extra_class:d,api_key:c,api_key_url:h}=n,p=s.conf.podata;function u(t,e){let{domain:a}=t||{},{lang:s,region:n}=e;return t?`${a}-${s}-${n}`:`temp-${s}-${n}`}function g(t){o&&(t.find(".atlt_save_strings").prop("disabled",!1),t.find(".atlt_stats").fadeIn("slow"),t.find(".atlt_translate_progress").fadeOut("slow"),t.find(".atlt_string_container").stop(),e("body").css("top","0"))}function f(t,e){return RegExp(`^${e.split("*").map(t=>t.replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")).join(".*")}$`).test(t)}function b(t){return t.split(" ").length}function v(t,e){let a=document.createElement("div");return a.className="container",a.innerHTML=`
        <input type="hidden" data-nextIndexVal="${t}" id= "input${t}">
        <h1 style ="text-align: center;" id="Part${t}">Part ${t+1} <span style= "font-size: large;" id="chatGPT_progress-label${t}"></span></h1>
        <div class="formBody">
        <input type="hidden" id="translate${t}">
    
        <table class="chatGPT_steps" id="chatGPT_steps${t}">
            <tr>
            <td class= "chatGPT_step-1">
              <h2>Step 1</h2>
              <p>Click on the copy button to copy the strings</p>
              <button class="button button-primary copy-button" id="copyButton${t}" type="button" name="copy">Copy</button>
            </td>
            <td class= "chatGPT_step-2">
              <h2>Step 2</h2>
              <p>Visit <a class = "chatGPT_step-2-anchor" href="https://chat.openai.com/" target="_blank">https://chat.openai.com/</a><br/>and paste strings in ChatGPT<br/>for translation.</p>
            </td>
            </tr>
            <tr>
            <td colspan="2" class= "chatGPT_step-3">
              <h2>Step 3</h2>
              <p>Now copy the translated string that ChatGPT gives you and paste it into the below section <span style="font-size: smaller;">(must be in JSON Format) <button type="button" class="preview-button button button-primary" id="preview${t}">Preview</button></span></p>
              <div style="position: relative;">
                        <textarea id="output${t}" class="output-box" rows="5" cols="130" style="width: 100%;" placeholder="Add translated strings here..."></textarea>
                        <button type="button" class="clear-button button button-primary" id="clearButton${t}">Clear</button>
                </div>
            </td>
            </tr>
            </table>
            </div>
            <button type= "button" class="button button-primary chatGPT_table_close" id = "chatGPT_table_close${t}" style="float:right; font-size:14px; margin: 10px 0;">Close</button>
            <div id="table${t}" class = "chatGPT_table"></div>`,a}function m(t){e(".container").hide(),e(`.container:eq(${t})`).show()}function w(t,a){e(".chatGptError").attr("id",`chatGptError${a}`),e(`#chatGptError${a}`).html(t)}function y(t,a,s,n){t.length<=1?(e("#prevButton").prop("disabled",!0),e(".chatGPT_save_cont").prop("disabled",!0)):0===a?(e("#prevButton").prop("disabled",!0),e(".chatGPT_save_cont").prop("disabled",!1)):a===t.length-1?(e("#prevButton").prop("disabled",!1),e(".chatGPT_save_cont").prop("disabled",!0)):(e("#prevButton").prop("disabled",!1),e(".chatGPT_save_cont").prop("disabled",!1))}function T(t){return t.replace(/</g,"&lt;").replace(/>/g,"&gt;")}function P(){let t=[],a=this.getAttribute("data-type"),s={'"% s"':'"%s"','"% d"':'"%d"','"% S"':'"%s"','"% D"':'"%d"',"% s":" %s ","% S":" %s ","% d":" %d ","% D":" %d ","٪ s":" %s ","٪ S":" %s ","٪ d":" %d ","٪ D":" %d ","٪ س":" %s ","%S":" %s ","%D":" %d ","% %":"%%"},n=/(\%\s*\d+\s*\$?\s*[a-z0-9])/gi;e("."+a+"-widget-body").find(".atlt_strings_table tbody tr").each(function(){let a=e(this).find("td.source").text(),o=e(this).find("td.target").text(),r=_(o,s),i=_(a,s),l=r.replace(n,function(t){return t.replace(/\s/g,"").toLowerCase()}),d=i.replace(n,function(t){return t.replace(/\s/g,"").toLowerCase()});t.push({source:d,target:l})});var o=e(this).parents(".atlt_custom_model").find("#project_id").val();k(t,o),e(".atlt_custom_model").fadeOut("slow"),e("html").addClass("merge-translations"),G()}function G(){var t=setInterval(function(){var a=e(".loco-modal"),s=e(".loco-modal #loco-apis-batch");if(a.length&&-1>=a.attr("style").indexOf("none")&&a.find("#loco-job-progress").length){e("html").removeClass("merge-translations"),s.find("a.icon-help, a.icon-group, #loco-job-progress").hide(),s.find("select#auto-api").hide();var n=e("select#auto-api option[value='loco_auto']").prop("selected","selected");s.find("select#auto-api").val(n.val()),a.find(".ui-dialog-titlebar .ui-dialog-title").html("Step 3 - Add Translations into Editor and Save"),s.find("button.button-primary span").html("Start Adding Process"),s.find("button.button-primary").on("click",function(){e(this).find("span").html("Adding...")}),a.addClass("addtranslations"),e(".noapiadded").remove(),s.find("form").show(),s.removeClass("loco-alert"),clearInterval(t)}},200)}function $(t){if(void 0!==t.originalEvent)var a=setInterval(function(){var t=e(".loco-modal"),s=t.find("#loco-apis-batch"),n=t.find(".ui-dialog-titlebar .ui-dialog-title");s.length&&!t.is(":hidden")&&(t.removeClass("addtranslations"),s.find("select#auto-api").show(),s.find("a.icon-help, a.icon-group").show(),s.find("#loco-job-progress").show(),n.html("Auto-translate this file"),s.find("button.button-primary span").html("Translate"),1===s.find("select#auto-api option").length&&(s.find(".noapiadded").remove(),s.removeClass("loco-alert"),s.find("form").hide(),s.addClass("loco-alert"),n.html("No translation APIs configured"),s.append(`<div class='noapiadded'>
                            <p>Add automatic translation services in the plugin settings.<br>or<br>Use <strong>Auto Translate</strong> addon button.</p>
                            <nav>
                                <a href='http://locotranslate.local/wp-admin/admin.php?page=loco-config&amp;action=apis' class='button button-link has-icon icon-cog'>Settings</a>
                                <a href='https://localise.biz/wordpress/plugin/manual/providers' class='button button-link has-icon icon-help' target='_blank'>Help</a>
                                <a href='https://localise.biz/wordpress/translation?l=de-DE' class='button button-link has-icon icon-group' target='_blank'>Need a human?</a>
                            </nav>
                        </div>`)),clearInterval(a))},100)}function C(t,e){return t.filter(t=>{if(t.source&&!t.target){var e,a,s,n,o;if(e=t.source,/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/.test(e)||(a=t.source,/<(?=.*? .*?\/ ?>|br|hr|input|!--|wbr)[a-z]+.*?>|<([a-z]+).*?<\/\1>/i.test(a))||(s=t.source,/[@^{}|<>]/g.test(s))||(n=t.source,n.match("(?:[✀-➿]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[#-9]️?⃣|㊙|㊗|〽|〰|Ⓜ|\ud83c[\udd70-\udd71]|\ud83c[\udd7e-\udd7f]|\ud83c\udd8e|\ud83c[\udd91-\udd9a]|\ud83c[\udde6-\uddff]|[\ud83c[\ude01-\ude02]|\ud83c\ude1a|\ud83c\ude2f|[\ud83c[\ude32-\ude3a]|[\ud83c[\ude50-\ude51]|‼|⁉|[▪-▫]|▶|◀|[◻-◾]|\xa9|\xae|™|ℹ|\ud83c\udc04|[☀-⛿]|⬅|⬆|⬇|⬛|⬜|⭐|⭕|⌚|⌛|⌨|⏏|[⏩-⏳]|[⏸-⏺]|\ud83c\udccf|⤴|⤵|[←-⇿])"))||t.source.includes("#"));else{if(o=t.source,/%s|%d/g.test(o))return!0;else return!0}}return!1})}function _(t,e,a){return!!t&&({2:function(){for(var a in e)t=_(t,a,e[a]);return t},3:function(){return t.replace(RegExp(e,"g"),a)},0:function(){}})[arguments.length]()}function k(t,e){if(t&&t.length>0)for(let a=0;a<t.length;a+=2500){let s=t.slice(a,a+2500),n=`-part-${Math.ceil(a/2500)}`;x(s,e,n)}}function x(t,a,s){let n={action:"save_all_translations",data:JSON.stringify(t),part:s,"project-id":a,wpnonce:i};e.ajax({url:r,method:"POST",data:n,dataType:"json",success:function(t){e('#loco-editor nav button[data-loco="auto"]').trigger("click")},error:function(t,e,a){console.error(a)}})}function A(){e("#atlt-dialog").dialog({dialogClass:d,resizable:!1,height:"auto",width:400,modal:!0,buttons:{Cancel:function(){e(this).dialog("close")}}})}!function t(){if(s&&s.conf){var a,n;let{conf:o}=s;p.shift();let{locale:r,project:i}=o,l=u(i,r);O(l,"yandex"),O(l,"google"),O(l,"deepl"),O(l,"chatGPT"),O(l,"geminiAI"),a=p,(n=C(a,"plain")).length>0?(E(n,type="yandex"),E(n,type="google"),E(n,type="geminiAI")):(e("#ytWidget").hide(),e(".notice-container").addClass("notice inline notice-warning").html("There is no plain string available for translations."),e(".atlt_string_container, .choose-lang, .atlt_save_strings, #google_translate_element, .translator-widget,.chatGPT_save_close, .chatGPT_save_cont, .notice-info, .is-dismissible").hide())}}(),e("#deepl-open-file").on("change",function(){e("#deepl-open-file")[0].files.length>0?e("#deepl_upload_strings_btn").addClass("button-primary"):e("#deepl_upload_strings_btn").removeClass("button-primary")});var I=document.querySelectorAll(".atlt_custom_model");function S(t){for(var e=[],a=t.length-1;a>=0;a--)e.unshift(["&#",t[a].charCodeAt(),";"].join(""));return e.join("")}function E(t,a){let s="",n=0,o=1,r="yandex"===a?'translate="yes"':"";if(t){for(let i in t)if(t.hasOwnProperty(i)){let l=t[i],d=l.source.trim();""!==d&&("yandex"==a||"google"==a||"deepl"==a||"geminiAI"==a)&&(s+=`<tr id="${i}"><td>${o}</td><td class="notranslate source">${S(d)}</td>`,"yandex"==a||"google"==a?s+=`<td   ${r}  class="target translate">${d}</td></tr>`:s+='<td class="target translate"></td></tr>',o++,n+=d.length)}e(".atlt_stats").each(function(){e(this).find(".totalChars").html(n)})}e("#"+a+"-widget-model").find(".atlt_strings_table > tbody.atlt_strings_body").html(s)}function O(t,a){let{wrapperCls:s,headerCls:n,bodyCls:o,footerCls:r,modelId:i}=function t(e){let a="",s="",n="",o="",r="";switch(e){case"yandex":a="yandex-widget-container",s="yandex-widget-header",n="yandex-widget-body",o="yandex-widget-footer",r="yandex-widget-model",type="yandex";break;case"google":a="google-widget-container",s="google-widget-header",n="google-widget-body",o="google-widget-footer",r="google-widget-model",type="google";break;case"deepl":a="deepl-widget-container",s="deepl-widget-header",n="deepl-widget-body",o="deepl-widget-footer",r="deepl-widget-model",type="deepl";break;case"chatGPT":a="chatGPT-widget-container",s="chatGPT-widget-header",n="chatGPT-widget-body",o="chatGPT-widget-footer",r="chatGPT-widget-model",type="chatGPT";break;case"geminiAI":a="geminiAI-widget-container",s="geminiAI-widget-header",n="geminiAI-widget-body",o="geminiAI-widget-footer",r="geminiAI-widget-model",type="geminiAI";break;default:a="yandex-widget-container",s="yandex-widget-header",n="yandex-widget-body",o="yandex-widget-footer"}return{wrapperCls:a,headerCls:s,bodyCls:n,footerCls:o,modelId:r,type}}(a),l=`
            <div id="${i}" class="modal atlt_custom_model  ${s} ${d}">
                <div class="modal-content">
                    <input type="hidden" id="project_id" value="${t}"> 
                    ${function t(e,a){if("yandex"===e||"google"===e||"deepl"===e||"geminiAI"===e){let s=`
        <div class="modal-header  ${a}">
                        <span class="close">&times;</span>
                        <h2 class="notranslate">Step 2 - Start Automatic Translation Process ${"geminiAI"===e?"(Beta)":""}</h2>
                        <div class="atlt_actions">
                            <button class="notranslate atlt_save_strings button button-primary" data-type = "${type}" disabled="true">Merge Translation</button>
                        </div>
                        <div style="display:none" class="atlt_stats hidden">
                            Wahooo! You have saved your valuable time via auto translating 
                            <strong class="totalChars"></strong> characters  using 
                            <strong>
                                <a href="https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post" target="_new">
                                    Loco Automatic Translate Addon
                                </a>
                            </strong>
                        </div>
                    </div>
                    `;return s}if("chatGPT"===e){let n=`
        <div class="modal-header  ${a}">
                        <span class="close">&times;</span>
                        <h2 class="notranslate">Step 2 - Start Automatic Translation Process</h2>
                        <div class="atlt_actions">
                            <button class="notranslate atlt_save_strings button button-primary" data-type = "${type}" disabled="true">Merge Translation</button>
                        </div>
                        <div style="display:none" class="atlt_stats hidden">
                            Wahooo! You have saved your valuable time via auto translating 
                            <strong class="totalChars"></strong> characters  using 
                            <strong>
                                <a href="https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post" target="_new">
                                    Loco Automatic Translate Addon
                                </a>
                            </strong>
                        </div>
                    </div>
                    `;return n}}(a,n)}   
                    ${function t(e,a){var s;let n=`${type}`,o=(s=n,s.charAt(0).toUpperCase()+s.slice(1)),r=`<div class = "modal-scrollbar">
        <div class="notice inline notice-info is-dismissible">
                        Plugin will not translate any strings with HTML or special characters because ${o} Translator currently does not support HTML and special characters translations.
                        You can edit translated strings inside Loco Translate Editor after merging the translations. Only special characters (%s, %d) fixed at the time of merging of the translations.
                    </div>
                    <div class="notice inline notice-info is-dismissible">
                        Machine translations are not 100% correct.
                        Please verify strings before using on the production website.
                    </div>
        <div class="modal-body  ${a}">
            <div class="atlt_translate_progress">
                Automatic translation is in progress....<br/>
                It will take a few minutes, enjoy ☕ coffee in this time!<br/><br/>
                Please do not leave this window or browser tab while the translation is in progress...

                <div class="progress-wrapper">
                    <div class="progress-container">
                        <div class="progress-bar" id="myProgressBar"><span id="progressText">0%</span></div>
                    </div>
                </div>
            </div>
            <div class="atlt_translate_limitexceed">
                <div class="limitexceed-wrapper">
                     <button class="close-button">&times;</button>
                    <h2>You have exceeded the API key rate limit.</h2>
                    <h2>Please try again after some time.</h2>
                </div>
            </div>
            ${function t(e){if("yandex"===e)return`<div class="translator-widget  ${e}">
                    <h3 class="choose-lang">Choose language <span class="dashicons-before dashicons-translation"></span></h3>
                    <div id="ytWidget">..Loading</div><br>
                </div>`;if("google"===e)return`<div class="translator-widget  ${e}">
                    <h3 class="choose-lang">Choose language <span class="dashicons-before dashicons-translation"></span></h3>
                    <div id="google_translate_element"></div>
                </div>`;if("geminiAI"===e)return`<div class="translator-widget  ${e}">
                    <h3 class="choose-lang">Click Here to Translate <span class="dashicons-before dashicons-translation"></span></h3>
                    <div id="geminiAI_translate_element"><button id="geminiAI_translate_button">Gemini AI translate</button> <span class="beta-button"> Beta </span></div>
                </div>`;if("deepl"===e)return`<div class="translator-widget  ${e}">
            <table class="deepl_steps">
            <tr>
            <td>
              <h2>Step 1</h2>
              <p>Download translatable docx file.</p>
              <button  class="button button-primary download_deepl" id="download_deepl_doc">Download Docx</button>
            </td>
            <td>
              <h2>Step 2</h2>
              <p>Visit <a href="https://www.deepl.com/translator" target="_blank">https://www.deepl.com/translator</a><br/>and upload downloaded file inside it<br/>for translations.</p>
            </td>
            </tr>
            <tr>
            <td>
              <h2>Step 3</h2>
              <p>Upload translated docx file here</p>
              <input type="file" id="deepl-open-file">
              <br />
              <span id="lblError" style="color: red;"></span>
              <br />
            </td>
            <td>
              <h2>Step 4</h2>
              <p>Click on "Upload Strings" & "Merge Translation" after this.</p>
              <input type="submit" id="deepl_upload_strings_btn" value="Upload Strings" />
            </td>
            </tr>
            </table>
            <div id="deepl_translate_element"></div>
            </div>`;if("chatGPT"!==e)return"";else return currentTab=0,`<div class="translator-widget  ${e}">
            <div class="chatGPT_progress">
          <div id="chatGPT_progressbar" style="width: 0%"></div>
        </div>
            <form id="Form">
            <div id="tabContainer">
            <button style="float:right; font-size:14px;" class="button button-primary prev_btn" id="prevButton" disabled="true" type="button">&#8249; Previous</button>
            </div>
            </form>
                <div id="chatGPT_translate_element"></div>
            </div>`}(e)}
            <div class="atlt_string_container">
                <table class="scrolldown atlt_strings_table">
                    <thead>
                        <th class="notranslate">S.No</th>
                        <th class="notranslate">Source Text</th>
                        <th class="notranslate">Translation</th>
                    </thead>
                    <tbody class="atlt_strings_body">
                    </tbody>
                </table>
            </div>
            <div class="notice-container"></div>
        </div>
        </div>`;return r}(a,o)}   
                    ${function t(e,a){if("yandex"===e||"google"===e||"deepl"===e||"geminiAI"===e){let s=` <div class="modal-footer ${a}">
        <div class="atlt_actions">
            <button class="notranslate atlt_save_strings button button-primary" data-type = "${type}" disabled="true">Merge Translation</button>
        </div>
        <div style="display:none" class="atlt_stats">
            Wahooo! You have saved your valuable time via auto translating 
            <strong class="totalChars"></strong> characters  using 
            <strong>
                <a href="https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post" target="_new">
                    Loco Automatic Translate Addon
                </a>
            </strong>
        </div>
    </div>`;return s}if("chatGPT"!==e)return"";{let n=` <div class="modal-footer ${a}">
            <div class="atlt_actions chatGPT_disable">
            <button data-type = "${type}" class="chatGPT_save_cont button button-primary btn-disabled">Save & Continue</button>
            <button data-type = "${type}" class="chatGPT_save_close button button-primary btn-disabled">Save & Close</button>
        </div>
        <div class="chatGptError"></div>
        <div style="display:none" class="atlt_stats">
            Wahooo! You have saved your valuable time via auto translating 
            <strong class="totalChars"></strong> characters  using 
            <strong>
                <a href="https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post" target="_new">
                    Loco Automatic Translate Addon
                </a>
            </strong>
        </div>
        </div>`;return n}}(a,r)} 
                    </div>
                </div>`;e("body").append(l)}e(t).click(function(t){for(var a=0;a<I.length;a++){var s=I[a];e(t.target).hasClass("atlt_custom_model")&&t.target===s&&(s.style.display="none",e(".container").length>0&&(e(".chatGPT_steps-border").length>0&&e(".chatGPT_steps-border").removeClass("chatGPT_steps-border"),e(".container").remove()))}}),e(".atlt_custom_model").find(".close").on("click",function(){e(".container").length>0&&(e(".chatGPT_steps-border").length>0&&e(".chatGPT_steps-border").removeClass("chatGPT_steps-border"),e(".container").remove()),e(".atlt_custom_model").fadeOut("slow")}),e(document).ready(function(){!function n(){let{conf:i}=s,{locale:d,project:x}=i,I=u(x,d);0===e("#loco-editor nav").find("#cool-auto-translate-btn").length&&function t(){let a=e("#loco-editor nav").find("#cool-auto-translate-btn");a.length>0&&a.remove();let s=e("#loco-editor nav").find("#loco-actions"),n=e('<fieldset><button id="cool-auto-translate-btn" class="button has-icon icon-translate">Auto Translate</button></fieldset>');s.append(n)}(),function t(){let a=l+"assets/images/"+extradata.yt_preview,s=l+"assets/images/"+extradata.gt_preview,n=l+"assets/images/"+extradata.dpl_preview,o=l+"assets/images/"+extradata.chatGPT_preview,r=l+"assets/images/"+extradata.geminiAI_preview,i=`
            <div id="atlt-dialog" title="Step 1 - Select Translation Provider" style="display:none;">
                <div class="atlt-settings">
                    <strong class="atlt-heading">Translate Using Yandex Page Translate Widget</strong>
                    <div class="inputGroup">
                        <button id="atlt_yandex_translate_btn" class="notranslate button button-primary">Yandex Translate</button>
                        <br/><a href="https://translate.yandex.com/" target="_blank"><img class="pro-features-img" src="${a}" alt="powered by Yandex Translate Widget"></a>
                    </div>
                    <hr/>
    
                    <strong class="atlt-heading">Translate Using Google Page Translate Widget</strong>
                    <div class="inputGroup">
                        <button id="atlt_google_translate_btn" class="notranslate button button-primary">Google Translate</button>
                        <br/><a href="https://translate.google.com/" target="_blank"><img class="pro-features-img" src="${s}" alt="powered by Google Translate Widget"></a>
                    </div>
                    <hr/>
    
                    <strong class="atlt-heading">Translate Using Deepl Doc Translator</strong>
                    <div class="inputGroup">
                        <button id="atlt_deepl_btn" class="notranslate button button-primary">DeepL Translate</button>
                        <br/><a href="https://www.deepl.com/en/translator" target="_blank"><img class="pro-features-img" src="${n}" alt="powered by DeepL Translate"></a>
                    </div>
                    <hr/>

                    <strong class="atlt-heading">Translate Using ChatGPT</strong>
                    <div class="inputGroup">
                        <button id="atlt_chatGPT_btn" class="notranslate button button-primary">ChatGPT Translate</button>
                        <br/><a href="https://chat.openai.com/" target="_blank"><img  class="pro-features-img" src="${o}" alt="powered by ChatGPT Translate"></a>
                    </div>
                    <hr/>

                    <strong class="atlt-heading">Translate Using Gemini AI API</strong>
                    <div class="inputGroup">
                        ${c?'<button id="atlt_geminiAI_btn" class="notranslate button button-primary">Gemini AI Translate</button>':'<button id="atlt_geminiAI_addApikey_btn" class="notranslate button button-primary">Add API key</button>'}<span class="beta-button"> Beta </span>
                        <br/><a href="https://gemini.google.com/" target="_blank"><img class="pro-features-img" src="${r}" alt="powered by Gemini AI"></a>
                    </div>
                </div>
            </div>
        `;e("body").append(i)}(),e("#cool-auto-translate-btn").on("click",A),e("button.icon-robot[data-loco='auto']").on("click",$),e("#atlt_yandex_translate_btn").on("click",function(){(function t(a){let s=a.lang||null,n="";n=({bel:"be",he:"iw",snd:"sd",jv:"jv",nb:"no",nn:"no"})[s]||s;let o=e("div#yandex-widget-model.yandex-widget-container");o.find(".atlt_actions > .atlt_save_strings").prop("disabled",!0),o.find(".atlt_stats").hide(),localStorage.setItem("lang",n),["af","jv","no","am","ar","az","ba","be","bg","bn","bs","ca","ceb","cs","cy","da","de","el","en","eo","es","et","eu","fa","fi","fr","ga","gd","gl","gu","he","hi","hr","ht","hu","hy","id","is","it","ja","jv","ka","kk","km","kn","ko","ky","la","lb","lo","lt","lv","mg","mhr","mi","mk","ml","mn","mr","mrj","ms","mt","my","ne","nl","no","pa","pap","pl","pt","ro","ru","si","sk","sl","sq","sr","su","sv","sw","ta","te","tg","th","tl","tr","tt","udm","uk","ur","uz","vi","xh","yi","zh"].includes(n)?(e("#atlt-dialog").dialog("close"),o.find(".notice, .inline, .notice-info, .is-dismissible").show(),o.fadeIn("slow")):(e("#atlt-dialog").dialog("close"),o.find(".notice-container").addClass("notice inline notice-warning").html("Yandex Automatic Translator Does not support this language."),o.find(".atlt_string_container, .choose-lang, .atlt_save_strings, #ytWidget, .translator-widget, .notice-info, .is-dismissible").hide(),o.fadeIn("slow"))})(d)}),e("#atlt_google_translate_btn").on("click",function(){(function t(s){var n=s.lang?s.lang:null;switch(n){case"bel":defaultlang="be";break;case"he":defaultlang="iw";break;case"snd":defaultlang="sd";break;case"jv":defaultlang="jw";break;case"nb":case"nn":defaultlang="no";break;default:defaultlang=n}let r=e("div#google-widget-model.google-widget-container");r.find(".atlt_actions > .atlt_save_strings").prop("disabled",!0),r.find(".atlt_stats").hide(),["en","zh","no","sq","am","ar","hy","az","eu","be","bn","bs","bg","ca","ceb","ny","zh-CN","zh-TW","co","hr","cs","da","nl","eo","et","tl","fi","fr","fy","gl","ka","de","el","gu","ht","ha","haw","iw","hi","hmn","hu","is","ig","id","ga","it","ja","jw","kn","kk","km","rw","ko","ku","ky","lo","la","lv","lt","lb","mk","mg","ms","ml","mt","mi","mr","mn","my","ne","no","or","ps","fa","pl","pt","pa","ro","ru","sm","gd","sr","st","sn","sd","si","sk","sl","so","es","su","sw","sv","tg","ta","tt","te","th","tr","tk","uk","ur","ug","uz","vi","cy","xh","yi","yo","zu"].includes(defaultlang)?(e("#atlt-dialog").dialog("close"),r.fadeIn("slow"),r.find(".notice, .inline, .notice-info, .is-dismissible").show(),a()):(e("#atlt-dialog").dialog("close"),r.find(".notice-container").addClass("notice inline notice-warning").html("Google Automatic Translator Does not support this language."),r.find(".atlt_string_container, .choose-lang, .atlt_save_strings, .translator-widget, .notice-info, .is-dismissible").hide(),r.fadeIn("slow")),o&&e("#google-widget-model").find(".atlt_save_strings").prop("disabled",!1)})(d)}),e("#google_translate_element").change(function(){var t,a,s,n;o=!0,t=e("#google-widget-model"),a=t.find(".atlt_string_container"),a.scrollTop(0),s=a[0].scrollHeight,n=Math.min(1e4,s),void 0!==s&&s>100?(t.find(".atlt_translate_progress").fadeIn("slow"),setTimeout(()=>{a.animate({scrollTop:s+2e3},2*n,"linear")},2e3),a.on("scroll",function(){e(this).scrollTop()+e(this).innerHeight()+50>=e(this)[0].scrollHeight&&g(t)}),a.innerHeight()+10>=s&&setTimeout(()=>{g(t)},1500)):setTimeout(()=>{g(t)},2e3)}),e("#atlt_deepl_btn").on("click",function(){(function a(n){var o=n.lang?n.lang:null,r=s.conf.project.domain;let i=e("div#deepl-widget-model.deepl-widget-container");if(i.find(".atlt_actions > .atlt_save_strings").prop("disabled",!0),e("#deepl_upload_strings_btn").prop("disabled",!1),e("#download_deepl_doc").prop("disabled",!1),i.find(".atlt_stats").hide(),["en","es","fr","it","nl","pl","pt","pt-br","ru","ja","zh","de","ro","lt","lv","bg","cs","da","et","fi","el","hu","sk","sl","sv","nb","id","ko","tr","uk"].includes(o)){var l=C(p,"plain");l.length>0?(E(l,type="deepl"),e("#download_deepl_doc").data("domain-name",r),i.find(".notice, .inline, .notice-info, .is-dismissible").show()):(e(".notice-container").addClass("notice inline notice-warning").html("There is no plain string available for translations."),e(".atlt_string_container, .choose-lang, .atlt_save_strings, .deepl_steps, .notice-info, .is-dismissible").hide()),e("#atlt-dialog").dialog("close"),i.fadeIn("slow")}else e("#atlt-dialog").dialog("close"),i.find(".notice-container").addClass("notice inline notice-warning").html("Deepl Translator does not support this language"),i.find(".atlt_string_container, .choose-lang, .atlt_save_strings, .deepl_steps, .notice-info, .is-dismissible").hide(),i.fadeIn("slow");lblError.innerHTML="",e("#deepl-open-file").val(""),e("#deepl_upload_strings_btn").removeClass("button-primary"),e("#deepl_upload_strings_btn").on("click",function(a){(function a(s,n,o,r){var i=`${s}-strings`,l=e("#deepl-open-file").val(),d=n.toUpperCase(),c=`${i} ${d}.docx`.toUpperCase();jsonObj=o,e("#deepl-open-file");var h=`${s}-strings * ${d}.docx`,p=`${s}-strings ${d} *.docx`.toUpperCase(),u=h.toUpperCase(),g=p.toUpperCase();if(l){var b=l.indexOf("\\")>=0?l.lastIndexOf("\\"):l.lastIndexOf("/"),i=l.substring(b);if((0===i.indexOf("\\")||0===i.indexOf("/"))&&(i=(file=i.substring(1)).toUpperCase()),!(f(i,u)||f(i,c)||f(i,g)))return lblError.innerHTML="Please upload files having extensions: <b>"+[c].join(", ")+"</b> only.",!1;lblError.innerHTML="";var v=document.getElementById("deepl-open-file"),m=new FileReader;m.onload=function(){var e=new JSZip(m.result),a=new t.docxtemplater().loadZip(e).getFullText();if(a.includes("www.DeepL.com/pro"))var s=a.split(/\n\n\t\n/g);else var s=a.split(/\s{4,}/g);var n=s.filter(function(t){return" "!=t}),o="",i=1;for(let l in jsonObj)if(jsonObj.hasOwnProperty(l)){let d=jsonObj[l];if(""!=d.source&&void 0!=n[l]){if(l>2500)break;o+=`<tr id="${l}"><td>${i}</td><td class="notranslate source">${d.source}</td>`,o+=`<td class="target" id="output">${n.slice(1)[l]}</td></tr>`}i++}r.find(".atlt_strings_body").html(o)},m.readAsBinaryString(v.files[0]),e(".atlt_save_strings").prop("disabled",!1),r.find(".atlt_stats").fadeIn("slow"),e("#deepl_upload_strings_btn").prop("disabled",!0)}})(r,o,l,i)})})(d)}),e("#download_deepl_doc").on("click",function(){(function t(a){var s=e(a).data("domain-name"),n="";e("#deepl-widget-model .atlt_strings_table tbody tr").each(function(t){var a=e(this).find("td.source").text();n+="™"+a});let o=n.split(/\™/g),r=new docx.Document,i=new docx.Table({rows:o.map(t=>new docx.TableRow({children:[new docx.TableCell({children:[new docx.Paragraph(t+" \n\n	\n")]}),]}))});r.addSection({children:[i]}),docx.Packer.toBlob(r).then(t=>{saveAs(t,`${s}-strings.docx`),e(a).prop("disabled",!0)})})(this)}),e("#atlt_chatGPT_btn").on("click",function(){let a={};var s=C(p,"plain");for(let n=0;n<s.length;n++)a[n+1]=s[n].source;var o,r,i,l,c,h,u,g,f,P=100,$=0;o=d,r=I,i=[],l=[],c=a,modelContainer=e("div#chatGPT-widget-model.chatGPT-widget-container"),e("#atlt-dialog").dialog("close"),e(".modal-footer.chatGPT-widget-footer .atlt_actions").addClass("chatGPT_disable"),e(".chatGPT_save_cont").addClass("btn-disabled"),e(".chatGPT_save_close").addClass("btn-disabled"),modelContainer.fadeIn("slow"),modelContainer.find(".atlt_string_container, .atlt_save_strings").hide(),function t(a,s,n,o){a.length=0;let r=document.getElementById("tabContainer"),i=Object.keys(s),l={},d=0,c=0;for(let h of i){let p=b(s[h]);if(d+p>500){a.push(l);let u=v(a.length-1,o);r.appendChild(u),l={},d=0,c=0}if(c>=n){a.push(l);let g=v(a.length-1,o);r.appendChild(g),l={},d=0,c=0}if(l[h]=s[h],d+=p,c++,d>=500){a.push(l);let f=v(a.length-1,o);r.appendChild(f),l={},d=0,c=0}e(".chatGptError").hide()}if(Object.keys(l).length>0){a.push(l);let m=v(a.length-1,o);r.appendChild(m)}return r}(i,c,100,modelContainer),modelContainer.find(".chatGptError, .chatGPT_table, .chatGPT_table_close, .clear-button, .preview-button").hide(),modelContainer.find("#prevButton, .notice, .inline, .notice-info, .is-dismissible").show(),m($),e(".chatGPT_step-1").addClass("chatGPT_steps-border"),e(".chatGPT_step-2, .chatGPT_step-3").removeClass("chatGPT_steps-border"),y(i,$,modelContainer,r),h=i.length,u=0,g=e("#chatGPT_progressbar"),1==h&&(e(".chatGPT_progress").hide(),e(`#chatGPT_progress-label${$}`).hide(),e(".preview-button").css({top:"231px"})),g.css("width",0),f=`(${u+1} / ${h} Parts)`,e(`#chatGPT_progress-label${$}`).text(f),e("#prevButton").on("click",function(){if($>0){var t=e(`#chatGptError${$}`);if(y(i,--$,modelContainer,r),m($),e(`#chatGPT_table_close${$}`).hide(),e(`#table${$}`).hide(),e(`#Part${$}`).show(),e(`#chatGPT_steps${$}`).show(),t&&(e(".chatGptError, .clear-button, .preview-button").hide(),e("textarea").val("")),0!=u){u--,g.css("width",Math.round(100*u/h)+"%");var a=`(${u+1} / ${h} Parts)`;e(`#chatGPT_progress-label${$}`).text(a),e(".modal-footer.chatGPT-widget-footer .atlt_actions").removeClass("chatGPT_disable"),e(".chatGPT_save_cont").removeClass("btn-disabled"),e(".chatGPT_save_close").removeClass("btn-disabled"),e(".chatGPT_step-1, .chatGPT_step-2, .chatGPT_step-3").removeClass("chatGPT_steps-border")}}}),e(".chatGPT_save_cont:first").on("click",function(){e(".modal-footer.chatGPT-widget-footer .atlt_actions").addClass("chatGPT_disable"),e("#prevButton").show(),e(".chatGPT_save_cont").addClass("btn-disabled"),e(".chatGPT_save_close").addClass("btn-disabled");let t=localStorage.getItem(`${r}-part${$+1}`);if(t&&$<i.length-1){var a=e(`#chatGptError${$}`);if(y(i,++$,modelContainer,r),m($),a&&(e(".chatGptError, .clear-button, .preview-button").hide(),e("textarea").val("")),u>=h)return;u++,g.css("width",Math.round(100*u/h)+"%");var s=`(${u+1} / ${h} Parts)`;e(`#chatGPT_progress-label${$}`).text(s),localStorage.getItem(`${r}-part${$+1}`)?(e(".modal-footer.chatGPT-widget-footer .atlt_actions").removeClass("chatGPT_disable"),e(".chatGPT_save_cont").removeClass("btn-disabled"),e(".chatGPT_save_close").removeClass("btn-disabled"),e(".chatGPT_step-1, .chatGPT_step-2, .chatGPT_step-3").removeClass("chatGPT_steps-border")):(e(".chatGPT_step-2, .chatGPT_step-3").removeClass("chatGPT_steps-border"),e(".chatGPT_step-1").addClass("chatGPT_steps-border"))}}),e(".chatGPT_save_close").on("click",function(){let t=localStorage.getItem(`${r}-part${$+1}`);if(t){let a=function t(a,s){let n={'"% s"':'"%s"','"% d"':'"%d"','"% S"':'"%s"','"% D"':'"%d"',"% s":" %s ","% S":" %s ","% d":" %d ","% D":" %d ","٪ s":" %s ","٪ S":" %s ","٪ d":" %d ","٪ D":" %d ","٪ س":" %s ","%S":" %s ","%D":" %d ","% %":"%%"},o=/(\%\s*\d+\s*\$?\s*[a-z0-9])/gi;return a.forEach((t,a)=>{e(`#table${a} tbody tr`).slice(1).each(function(t){e(this).find("td.source").text();var a=e(this).find("td.target").text(),r=e(this).find("td.source").text();let i,l;if(""!=a&&""!=r){let d=_(a,n),c=_(r,n);i=d.replace(o,function(t){return t.replace(/\s/g,"").toLowerCase()}),l=c.replace(o,function(t){return t.replace(/\s/g,"").toLowerCase()})}void 0!=i&&void 0!=l&&s.push({source:l,target:i})})}),s}(i,l);k(a,r),e("#chatGPT-widget-model").fadeOut("slow",function(){for(let t=0;t<i.length;t++)localStorage.removeItem(`${r}-part${t+1}`),e(".container").length>0&&e(".container").remove()}),e("html").addClass("merge-translations"),G()}}),function t(a,s){a.forEach((t,a)=>{let n=localStorage.getItem(`${s}-part${a+1}`);if(n){let o=JSON.parse(n),r='<table class="table">';r+='<tr><th scope="col">S. No.</th><th scope="col">Source</th><th scope="col">Target</th></tr>',Object.keys(o).forEach((t,e)=>{let a=o[t].source,s=o[t].target,n=a?T(a):"",i=s?T(s):"";r+=`<tr><td>${t}</td><td class = "source">${n}</td><td class = "target">${i}</td></tr>`}),r+="</table>";let i=document.querySelector(`#table${a}`);i.innerHTML=r,e(".chatGPT_step-1").removeClass("chatGPT_steps-border"),e(".modal-footer.chatGPT-widget-footer .atlt_actions").removeClass("chatGPT_disable"),e(".chatGPT_save_cont").removeClass("btn-disabled"),e(".chatGPT_save_close").removeClass("btn-disabled")}else{let l=document.querySelector(`#table${a}`),d='<table class="table">';d+='<tr><th scope="col">S. No.</th><th scope="col">Source</th><th scope="col">Target</th></tr>',Object.keys(t).forEach((e,a)=>{let s=t[e],n=s?S(s):"";d+=`<tr><td>${e}</td><td class = "source">${n}</td><td class = "target"></td></tr>`}),d+="</table>",l.innerHTML=d}})}(i,r),function a(s,n,o,r,i){s.forEach((a,r)=>{jsonString=`You are requesting the translation of a JSON array into ${n.label} language. Please follow the instructions provided below for accurate translation:

            Instruction 1: [% s,% d,% S,% D,% s,% S,% d,% D,%س] These placeholders are special and should not be translated.
            Instruction 2: Avoid repeating translations and skip any strings if necessary. If a string is skipped, maintain its original key.
            Instruction 3: Return the translation in the format of a JSON array with 'source' and 'target' keys. 'Source' should contain the original strings from the given JSON array, while 'target' should include their translations.
            Instruction 4: Use '\\' to escape special characters like " and ' to ensure valid JSON format.
            Instruction 5: Translate the provided JSON array into ${n.label} language, regardless of whether the values are the same.
            ${JSON.stringify(a)}
            Please ensure that the output follows the format:
            {"key(numeric value)":{"source": "(original strings from the JSON)", "target": "(translations of the strings in ${n.label} language)"}}`,document.getElementById(`translate${r}`).value=jsonString;let l=document.getElementById(`copyButton${r}`);l.addEventListener("click",function(){e(".chatGPT_step-1, .chatGPT_step-3, .chatGPT_save_cont").removeClass("chatGPT_steps-border"),e(".chatGPT_step-2").addClass("chatGPT_steps-border");let a=document.getElementById(`translate${r}`),s=document.createElement("textarea");s.value=a.value,document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),l.innerText="Copied",setTimeout(()=>{t.open("https://chat.openai.com","_blank")},800),setTimeout(function(){e(".chatGPT_step-2").removeClass("chatGPT_steps-border"),e(".chatGPT_step-3").addClass("chatGPT_steps-border")},1e3),setTimeout(()=>{l.innerText="Copy"},6e3)});let d=document.getElementById(`output${r}`);d.addEventListener("input",function(t){setTimeout(function(){let t=d.value;""!==t&&(function t(a,s,n){let o={};if(function t(n){try{return JSON.parse(n),!0}catch(o){if(s.startsWith("You are a helpful assistant that translates and replies with well-formed JSON")){var r="Untranslated Strings! *You have pasted the untranslated strings, Please translate them first";return e(".chatGptError").show(),w(r,a),!1}var r='Invalid JSON Format! *Please enter a valid JSON-formatted string in the textarea. Click <a href="https://locoaddon.com/docs/pro-plugin/ai-translation-issues-and-solutions/" target="_blank">here</a> to validate your JSON';e(".chatGptError").show(),w(r,a)}}(s)){let r=JSON.parse(s);if(Array.isArray(r)){let i=document.querySelector(`#table${a}`),l=i.querySelectorAll(".source"),d=l[0].textContent;if(r&&r[0]&&r[0][1]&&r[0][1].source){if(d===r[0][1].source){i.innerHTML="";let c='<table class="table">';c+='<tr><th scope="col">S. No.</th><th scope="col">Source</th><th scope="col">Target</th></tr>',r.forEach((t,s)=>{if("object"==typeof t&&null!==t){let n=Object.keys(t)[0],{source:r,target:i}=t[n],l=r?T(r):"",d=i?T(i):"";c+=`<tbody><tr><td>${n}</td><td class="source">${l}</td><td class="target">${d}</td></tr></tbody>`,o[n]={source:r,target:i},e(".chatGptError").hide(),w("",a),e(".modal-footer.chatGPT-widget-footer .atlt_actions").removeClass("chatGPT_disable"),e(".chatGPT_save_cont").removeClass("btn-disabled"),e(".chatGPT_save_close").removeClass("btn-disabled")}}),c+="</table>",i.innerHTML+=c;let h=JSON.stringify(o);localStorage.setItem(`${n}-part${a+1}`,h),e(".chatGPT_step-1, .chatGPT_step-2, .chatGPT_step-3").removeClass("chatGPT_steps-border");var p="";e(".chatGptError").hide(),w(p,a),e(".modal-footer.chatGPT-widget-footer .atlt_actions").removeClass("chatGPT_disable"),e(".chatGPT_save_cont").removeClass("btn-disabled"),e(".chatGPT_save_close").removeClass("btn-disabled")}else{var p="Wrong translated strings! *Please enter right strings translation";return e(".chatGptError").show(),w(p,a),!1}}else if(r&&r[0]&&r[0].source){if(d===r[0].source){i.innerHTML="";let u='<table class="table">';u+='<tr><th scope="col">S. No.</th><th scope="col">Source</th><th scope="col">Target</th></tr>',r.forEach((t,s)=>{if("object"==typeof t&&null!==t){Object.keys(t)[0];let{source:n,target:r}=t,i=n?T(n):"",l=r?T(r):"";u+=`<tbody><tr><td>${s+1}</td><td class="source">${i}</td><td class="target">${l}</td></tr></tbody>`,o[`${s+1}`]={source:n,target:r},e(".chatGptError").hide(),w("",a),e(".modal-footer.chatGPT-widget-footer .atlt_actions").removeClass("chatGPT_disable"),e(".chatGPT_save_cont").removeClass("btn-disabled"),e(".chatGPT_save_close").removeClass("btn-disabled")}}),u+="</table>",i.innerHTML+=u;let g=JSON.stringify(o);localStorage.setItem(`${n}-part${a+1}`,g),e(".chatGPT_step-1, .chatGPT_step-2, .chatGPT_step-3").removeClass("chatGPT_steps-border");var p="";e(".chatGptError").hide(),w(p,a),e(".modal-footer.chatGPT-widget-footer .atlt_actions").removeClass("chatGPT_disable"),e(".chatGPT_save_cont").removeClass("btn-disabled"),e(".chatGPT_save_close").removeClass("btn-disabled")}else{var p="Wrong translated strings! *Please enter right strings translation";return e(".chatGptError").show(),w(p,a),!1}}}else if("object"!=typeof r||Array.isArray(r)){var p="Invalid JSON Format! *Please enter a valid JSON-formatted strfing in the textarea.";return e(".chatGptError").show(),w(p,a),!1}else{let f=Object.keys(r),b=document.querySelector(`#table${a}`),v=b.querySelectorAll(".source"),m=v[0].textContent;if(m===r[f[0]].source){let y='<table class="table">';y+='<tr><th scope="col">S. No.</th><th scope="col">Source</th><th scope="col">Target</th></tr>',f.forEach(t=>{let{source:e,target:a}=r[t],s=e?T(e):"",n=a?T(a):"";y+=`<tbody><tr><td>${t}</td><td class="source">${s}</td><td class="target">${n}</td></tr></tbody>`,o[t]={source:e,target:a}}),y+="</table>",b.innerHTML=y;let P=JSON.stringify(o);localStorage.setItem(`${n}-part${a+1}`,P),e(".chatGPT_step-1, .chatGPT_step-2, .chatGPT_step-3").removeClass("chatGPT_steps-border");var p="";e(".chatGptError").hide(),w(p,a),e(".modal-footer.chatGPT-widget-footer .atlt_actions").removeClass("chatGPT_disable"),e(".chatGPT_save_cont").removeClass("btn-disabled"),e(".chatGPT_save_close").removeClass("btn-disabled")}else{var p="Wrong translated strings! *Please enter right strings translation";return e(".chatGptError").show(),w(p,a),!1}}}}(r,t,o),e(`#clearButton${r}`).show(),e(`#preview${r}`).show()),""==t&&(e(".chatGptError").hide(),e(`#clearButton${r}`).hide(),e(`#preview${r}`).hide(),w("",r))},100)});let c=document.getElementById(`clearButton${r}`);c.addEventListener("click",function(){e(`#output${r}`).val(""),e(`#clearButton${r}`).hide(),e(`#preview${r}`).hide(),e(".chatGptError").hide(),w("",r)});let h=document.getElementById(`preview${r}`);h.addEventListener("click",function(){e(`#Part${r}`).hide(),e(`#chatGPT_steps${r}`).hide(),e("#prevButton, .notice, .inline, .notice-info, .is-dismissible").hide(),e(`#chatGPT_table_close${r}`).show(),e(`#table${r}`).show()});let p=document.getElementById(`chatGPT_table_close${r}`);p.addEventListener("click",function(){e(`#Part${r}`).show(),e(`#chatGPT_steps${r}`).show(),e("#prevButton, .notice, .inline, .notice-info, .is-dismissible").show(),e(`#chatGPT_table_close${r}`).hide(),e(`#table${r}`).hide()}),setInterval(function(){let t=localStorage.getItem(`${o}-part${s.length}`);e(".chatGptError").is(":empty")&&t?i.find(".atlt_stats").fadeIn("slow"):i.find(".atlt_stats").hide()},200)})}(i,o,r,l,modelContainer)}),e("#atlt_geminiAI_btn").on("click",function(){let t;t=e("div#geminiAI-widget-model.geminiAI-widget-container"),e("#atlt-dialog").dialog("close"),t.fadeIn("slow"),t.find(".notice, .inline, .notice-info, .is-dismissible").show()}),e("#atlt_geminiAI_addApikey_btn").on("click",function(){t.location.href=h});let O=C(p,"plain"),L=O.map(t=>t.source),B=function t(e){let a=[],s=0,n=[];for(let o=0;o<e.length;o++){let r=e[o].length,i=Math.ceil(r/4);a.length+1>45&&(n.push(a),a=[],s=0),s+i<=300?(a.push(e[o]),s+=i):(n.push(a),a=[e[o]],s=i)}return a.length>0&&n.push(a),n}(L);e("#geminiAI_translate_button").on("click",function(){(function t(a,s,n){let o=e("#geminiAI-widget-model"),i=n.length,l=!1,d=[],c=0,h=0,p=!0,u=!1;function g(t){let a={action:"my_ajax_handler",source_data:{locale:s,source:t}};return new Promise((t,s)=>{e.ajax({url:r,type:"POST",data:a,success:function(e){if(!u&&!e.success&&429===e.data){p=!1,u=!0,o.find(".atlt_translate_limitexceed").fadeIn("slow"),o.find(".atlt_translate_progress").fadeOut("slow"),t();return}if(e.success&&e.data){let a=e.data;d.push(Boolean(a));let s=[],r=[],g=/(?:\\{1,2}u([0-9a-fA-F]{4})|\\u([0-9a-fA-F]{4}))/g,f=t=>{if(!t.source)return;let e=t=>t.replace(g,(t,e,a)=>String.fromCharCode(parseInt(e||a,16))),a=e(t.source).replace(/\\/g,""),o=e(t.target).replace(/\\/g,"");n.includes(a)&&(s.push(a),r.push(o))};if(Array.isArray(a))a.forEach(f);else if("object"==typeof a)for(let b in a)a.hasOwnProperty(b)&&f(a[b]);let v="";for(let m=0;m<s.length;m++)v+=`<tr id="${h}"><td>${h+1}</td><td class="notranslate source">${S(s[m])}</td>`,v+=`<td class="target translate">${S(r[m])}</td></tr>`,h++;c+=s.length;let w=o.find("#myProgressBar"),y=Math.round(c/i*100),T=o.find("#progressText");w.css("width",`${y}%`),T.text(`${y}%`),l||(o.find(".atlt_strings_table > tbody.atlt_strings_body").html(""),l=!0),o.find(".atlt_strings_table > tbody.atlt_strings_body").append(v)}t()},error:function(t,e,a){console.error("AJAX Error: "+a),s(a)}})})}async function f(){try{for(let t=0;t<a.length;t+=15)if("block"!==o.css("display")||u||(p=!0),p){let e=a.slice(t,t+15),s=e.map(g);await Promise.allSettled(s),t+15<a.length&&await new Promise(t=>setTimeout(t,0))}else break;if(d.some(Boolean)){o.find(".atlt_save_strings").prop("disabled",!1),o.find(".atlt_stats").fadeIn("slow"),o.find(".atlt_translate_progress").fadeOut("slow"),o.find("#geminiAI_translate_button").prop("disabled",!0).css({"background-color":"#cccccc",cursor:"not-allowed",opacity:"1"});let n=c<i?`Wahooo! You have saved your valuable time by using auto-translation. You have translated <strong class="totalChars">${c}</strong> Strings Out of <strong class="totalChars">${i}</strong> Strings using <strong><a href="https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post" target="_new">Loco Automatic Translate Addon</a></strong>`:`Wahooo! You have saved your valuable time via auto translating <strong class="totalChars">${c}</strong> Strings using <strong><a href="https://wordpress.org/support/plugin/automatic-translator-addon-for-loco-translate/reviews/#new-post" target="_new">Loco Automatic Translate Addon</a></strong>`;o.find(".atlt_stats").html(n)}else o.find(".atlt_translate_progress").fadeOut("slow")}catch(r){console.error("An error occurred during the AJAX processing:",r),o.find(".atlt_translate_progress").fadeOut("slow")}}o.find(".atlt_translate_progress").fadeIn("slow"),o.find(".progress-wrapper").show(),f().catch(t=>{console.error("An error occurred during the AJAX processing:",t),o.find(".atlt_translate_progress").fadeOut("slow")}),o.find(".geminiAI-widget-header .close").on("click",function(){p=!1}),o.find(".close-button").on("click",function(){o.find(".atlt_translate_limitexceed").fadeOut("slow")})})(B,d,L)}),e(".atlt_save_strings").on("click",P)}()})}(window,jQuery,gTranslateWidget);